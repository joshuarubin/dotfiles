Host *
{{- if eq .chezmoi.hostname "vhagar" }}
  IdentityAgent SSH_AUTH_SOCK
{{- else if .secrets }}
  IdentityAgent ~/.1password/agent.sock
{{- end }}
  ControlMaster auto
  ControlPersist 300
  ControlPath ~/.ssh/connections/%r_%h_%p

Host balerion pi4 jrubin
  # forward local port 2489 for lemonade copy/paste server
  RemoteForward 2489 127.0.0.1:2489
  ForwardAgent yes

Host pi4
  HostName pi4.local
  User pi

Host github.com
  User git

Host balerion
  HostName balerion.local

Host pi-star
  HostName pi-star.local
  User pi-star

{{ if eq .chezmoi.os "linux" -}}
# Match exec "/usr/bin/sft resolve -q %h"
Host jrubin
  # ProxyCommand "/usr/bin/sft" proxycommand %h
  ProxyCommand "/usr/bin/sft" proxycommand jrubin
  UserKnownHostsFile {{ .chezmoi.homeDir }}/.local/share/ScaleFT/proxycommand_known_hosts
{{- else if eq .chezmoi.os "darwin" -}}
# Match exec "/usr/local/bin/sft resolve -q %h"
Host jrubin
  # ProxyCommand "/usr/local/bin/sft" proxycommand %h
  ProxyCommand "/usr/local/bin/sft" proxycommand jrubin
  UserKnownHostsFile "{{ .chezmoi.homeDir }}/Library/Application Support/ScaleFT/proxycommand_known_hosts"
{{- end }}

# vim: ft=sshconfig nospell
