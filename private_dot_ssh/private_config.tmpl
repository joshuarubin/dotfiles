Host *
{{- if eq .chezmoi.os "darwin" }}
  IdentityAgent SSH_AUTH_SOCK
{{- else if .secrets }}
  IdentityAgent ~/.1password/agent.sock
{{- end }}
  ControlMaster auto
  ControlPersist 300
  ControlPath ~/.ssh/connections/%r_%h_%p
  Compression yes
  ServerAliveInterval 120

Host balerion pi4 jrubin jrubin.dev
  ForwardAgent yes

Host jrubin.dev
  HostName jrubin.dev.psw.groq.io

Host pi4
  HostName pi4.local
  User pi

Host github.com
  User git

Host balerion
  HostName balerion.local

Host pi-star
  HostName pi-star.local
  User pi-star

{{ if eq .chezmoi.os "linux" -}}
Match exec "/usr/bin/sft resolve -q %h"
  ProxyCommand "/usr/bin/sft" proxycommand %h
  UserKnownHostsFile {{ .chezmoi.homeDir }}/.local/share/ScaleFT/proxycommand_known_hosts
{{- else if eq .chezmoi.os "darwin" -}}
Match exec "/usr/local/bin/sft resolve -q %h"
  ProxyCommand "/usr/local/bin/sft" proxycommand %h
  UserKnownHostsFile "{{ .chezmoi.homeDir }}/Library/Application Support/ScaleFT/proxycommand_known_hosts"
{{- end }}

# vim: ft=sshconfig nospell
